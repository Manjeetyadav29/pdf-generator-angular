<div id="profile-section" class="profile-container">
    <div class="profile-background">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
        <div class="circle circle-3"></div>
    </div>

    <div class="profile-card">
        <div class="avatar-container">
            <div class="avatar">
                <img crossorigin="anonymous" [src]="user.avatar" [alt]="user.name + ' Avatar'">
                <div class="online-indicator" [class.online]="user.isOnline"></div>
            </div>
        </div>

        <div class="profile-actions-top">
            <button class="btn-connect" (click)="connect()" [class.connected]="isConnected">
                <i class="bi bi-person-plus"></i>
                {{ isConnected ? 'Connected' : 'Connect' }}
            </button>

            <button class="btn-message" (click)="message()">
                <i class="bi bi-chat-dots"></i>
                Message
            </button>
        </div>

        <div class="user-info">
            <h1 class="user-name">{{ user.name }}</h1>
            <p class="user-location">{{ user.location }}</p>

            <div class="user-details">
                <p class="user-role">{{ user.role }}</p>
                <p class="user-education">{{ user.education }}</p>
            </div>
            <div class="mutual-friends" *ngIf="user.mutualFriends > 0">
                <span class="mutual-count">{{ user.mutualFriends }} mutual friends</span>
            </div>
        </div>

        <div class="user-stats">
            <div class="stat-item" (click)="viewFriends()">
                <div class="stat-number">{{ user.stats.friends }}</div>
                <div class="stat-label">Friends</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item" (click)="viewPhotos()">
                <div class="stat-number">{{ user.stats.photos }}</div>
                <div class="stat-label">Photos</div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item" (click)="viewComments()">
                <div class="stat-number">{{ user.stats.comments }}</div>
                <div class="stat-label">Comments</div>
            </div>
        </div>

        <button class="btn-show-more" (click)="showMore()">
            {{ showExpandedProfile ? 'Show less' : 'Show more' }}
        </button>

        <div class="expanded-profile" [class.expanded]="showExpandedProfile">
            <div class="additional-info">
                <div class="info-item">
                    <strong>Member since:</strong> {{ user.joinDate }}
                </div>
                <div class="info-item">
                    <strong>Status:</strong>
                    <span class="status" [class.online]="user.isOnline">
                        {{ user.isOnline ? 'Online' : 'Offline' }}
                    </span>
                </div>
            </div>

            <div class="additional-actions">
                <button class="btn-secondary" (click)="toggleFollow()">
                    <i class="bi bi-heart"></i>
                    {{ isFollowing ? 'Unfollow' : 'Follow' }}
                </button>

                <button class="btn-secondary" (click)="shareProfile()">
                    <i class="bi bi-share"></i>
                    Share
                </button>

                <button class="btn-secondary btn-report" (click)="reportProfile()">
                    <i class="bi bi-flag"></i>
                    Report
                </button>
            </div>
        </div>
    </div>
</div>